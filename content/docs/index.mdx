---
title: API Reference
description: A comprehensive guide to the National In-service Training API.
---

# API Reference

Welcome to the API reference for the National In-service Training program. This documentation provides detailed information about the available endpoints, data models, and error handling.

## Base URL

The base URL for all API endpoints is:

```
http://localhost:4000/v1
```

## Authentication

Currently, the API does not require authentication. This will be implemented in a future version.

## Rate Limiting

The API has a rate limiter to prevent abuse. The default settings are a burst of 5 requests and 2 requests per second. If you exceed these limits, you will receive a `429 Too Many Requests` response.

## Healthcheck

### GET /healthcheck

Checks the status of the API.

**Response:**

```json
{
    "status": "available",
    "system_info": {
        "environment": "development",
        "version": "1.0.0"
    }
}
```

## National In-service Training (NITs)

### POST /nits

Creates a new training session.

**Request Body:**

```json
{
    "course_id": 1,
    "start_date": "2025-12-01T00:00:00Z",
    "end_date": "2025-12-05T00:00:00Z",
    "location": "Training Academy"
}
```

**Validation Rules:**

*   `course_id`: Must be a positive integer.
*   `start_date`: Must be a valid date and time.
*   `end_date`: Must be a valid date and time, and must be after the `start_date`.
*   `location`: Must not be empty and must be less than or equal to 100 characters.

## Officers

### GET /officers

Retrieves a list of all officers. Supports pagination.

**Query Parameters:**

*   `page`: The page number to retrieve. Defaults to `1`.
*   `page_size`: The number of records to retrieve per page. Defaults to `20`.

### POST /officers

Creates a new officer.

**Request Body:**

```json
{
    "regulation_number": "12345",
    "first_name": "John",
    "last_name": "Doe",
    "sex": "Male",
    "rank_id": 1,
    "formation_id": 1,
    "posting_id": 1,
    "is_active": true
}
```

**Validation Rules:**

*   `regulation_number`: Must not be empty and must be less than or equal to 50 characters.
*   `first_name`: Must not be empty and must be less than or equal to 100 characters.
*   `last_name`: Must not be empty and must be less than or equal to 100 characters.
*   `sex`: Must be either "Male" or "Female".

### GET /officers/:id

Retrieves a specific officer by their ID.

### PATCH /officers/:id

Updates a specific officer's details.

### DELETE /officers/:id

Deletes a specific officer.

## Courses

### GET /courses

Retrieves a list of all courses. Supports pagination.

**Query Parameters:**

*   `page`: The page number to retrieve. Defaults to `1`.
*   `page_size`: The number of records to retrieve per page. Defaults to `20`.

### POST /courses

Creates a new course.

**Request Body:**

```json
{
    "title": "Advanced Investigation Techniques",
    "description": "A course on modern investigation methods.",
    "category": "Mandatory",
    "credit_hours": 40.5
}
```

**Validation Rules:**

*   `title`: Must not be empty and must be less than or equal to 255 characters.
*   `description`: Must be less than or equal to 1000 characters.
*   `category`: Must be either "Mandatory" or "Elective".
*   `credit_hours`: Must be a positive number.

### GET /courses/:id

Retrieves a specific course by its ID.

### PATCH /courses/:id

Updates a specific course's details.

### DELETE /courses/:id

Deletes a specific course.

## Facilitators

### GET /facilitators

Retrieves a list of all facilitators. Supports pagination.

**Query Parameters:**

*   `page`: The page number to retrieve. Defaults to `1`.
*   `page_size`: The number of records to retrieve per page. Defaults to `20`.

### POST /facilitators

Creates a new facilitator.

**Request Body:**

```json
{
    "first_name": "John",
    "last_name": "Doe",
    "email": "johndoe@example.com",
    "personnel_id": 1
}
```

### GET /facilitators/:id

Retrieves a specific facilitator by their ID.

### PATCH /facilitators/:id

Updates a specific facilitator's details.

### DELETE /facilitators/:id

Deletes a specific facilitator.

### POST /sessions/:id/facilitators

Assigns a facilitator to a session.

### DELETE /sessions/:id/facilitators/:facilitator_id

Removes a facilitator from a session.

## Feedback and Ratings

### POST /facilitators/:id/feedback

Creates feedback for a facilitator.

**Request Body:**

```json
{
  "session_enrollment_id": 1,
  "score": 5,
  "comment": "Excellent facilitator!"
}
```

### GET /facilitators/:id/feedback

Lists feedback for a facilitator.

### POST /courses/:id/feedback

Creates feedback for a course.

**Request Body:**

```json
{
  "session_enrollment_id": 1,
  "score": 4,
  "comment": "The course was very informative."
}
```

### GET /courses/:id/feedback

Lists feedback for a course.

### POST /enrollments/:id/courserating

Submits a rating for a course, linked to a specific enrollment.

**Request Body:**

```json
{
    "score": 5,
    "comment": "Great course!"
}
```

### POST /enrollments/:id/facilitatorrating

Submits a rating for a facilitator, linked to a specific enrollment.

**Request Body:**

```json
{
    "facilitator_id": 1,
    "score": 5,
    "comment": "Excellent facilitator!"
}
```

## Error Handling

The API uses standard HTTP status codes to indicate the success or failure of a request.

*   `200 OK`: The request was successful.
*   `201 Created`: The resource was successfully created.
*   `400 Bad Request`: The request was malformed or invalid.
*   `404 Not Found`: The requested resource could not be found.
*   `422 Unprocessable Entity`: The request was well-formed but could not be processed due to validation errors.
*   `429 Too Many Requests`: The rate limit has been exceeded.
*   `500 Internal Server Error`: An unexpected error occurred on the server.

When an error occurs, the response body will contain a JSON object with an `error` key that provides more information about the error. For validation errors, the `error` object will contain a map of the invalid fields and the corresponding error messages.
